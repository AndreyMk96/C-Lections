// Тема 45 - Потоки

#include <iostream>
#include <fstream>

using namespace std;


int main()
{
    // Поток является центральным понятием iostream классов. Можно считать, что поток — это смарт-файл, который
    // выступает в качестве источника и назначения для байт. Характеристики потока определяется его классом и
    // пользовательскими операторами вставки и извлечения. (Из документации)

    // Для работы с файлами в стандартной библиотеке определен заголовочный файл fstream, который определяет базовые
    // типы для чтения и записи файлов. В частности, это:
    // - ifstream: для чтения с файла
    // - ofstream: для записи в файл
    // - fstream: совмещает запись и чтение

    // Для открытия файла в функцию необходимо передать путь к файлу в виде строки.
    // И также можно указать режим открытия. Список доступных режимов открытия файла:

    // ios::in: файл открывается для ввода (чтения). Может быть установлен только для объекта ifstream или fstream
    // ios::out: файл открывается для вывода (записи). При этом старые данные удаляются. Может быть установлен только для объекта ofstream или fstream
    // ios::app: файл открывается для дозаписи. Старые данные не удаляются.
    // ios::ate: после открытия файла перемещает указатель в конец файла
    // ios::trunc: файл усекается при открытии. Может быть установлен, если также установлен режим out
    // ios::binary: файл открывается в бинарном режиме

    std::ofstream out;          // поток для записи
    out.open("hello1.txt"); // окрываем файл для записи

    std::ofstream out2;
    out2.open("hello2.txt", std::ios::app); // окрываем файл для дозаписи

    std::ofstream out3;
    out2.open("hello3.txt", std::ios::out | std::ios::trunc); // установка нескольких режимов

    std::ifstream in;       // поток для чтения
    in.open("hello4.txt"); // окрываем файл для чтения

    std::fstream fs;        // поток для чтения-записи
    fs.open("hello5.txt"); // окрываем файл для чтения-записи

    // При вызове конструктора, в который передан путь к файлу, данный файл будет автоматически открываться:
    // std::ofstream out("hello.txt");
    // std::ifstream in("hello.txt");
    // std::fstream fs("hello.txt", std::ios::app);

    // В процессе работы мы можем проверить, окрыт ли файл с помощью функции is_open().
    // Если файл открыт, то она возвращает true:
    if (in.is_open())
    {
        cout << "file open" << endl;
    }
    else{
        cout << "file is not open" << endl;
    }

    // После завершения работы с файлом его следует закрыть с помощью функции close(). Также стоит отметить,
    // что при выходе объекта потока из области видимости, он удаляется, и у него автоматически вызывается функция close.
    out.close();
    out2.close();
    in.close();
    fs.close();
}